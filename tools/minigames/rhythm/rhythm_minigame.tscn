[gd_scene load_steps=13 format=3 uid="uid://0qt8i17a6sjh"]

[ext_resource type="Script" path="res://tools/minigames/rhythm/rhythm_minigame.gd" id="1_pb007"]
[ext_resource type="Texture2D" uid="uid://dnodymyvasg6y" path="res://tools/minigames/rhythm/assets/bg.jpg" id="2_ahkas"]
[ext_resource type="PackedScene" uid="uid://6kqupwwsa2f0" path="res://tools/minigames/rhythm/key/board.tscn" id="3_jy8mj"]
[ext_resource type="PackedScene" uid="uid://b4707jscv3wq5" path="res://tools/minigames/rhythm/sound/note_spawner.tscn" id="4_sd6aa"]
[ext_resource type="AudioStream" uid="uid://cp1lq5rjgk282" path="res://tools/minigames/rhythm/assets/beatmaps/shop.mp3" id="5_0ssek"]
[ext_resource type="PackedScene" uid="uid://bykh112oo7d2y" path="res://tools/minigames/rhythm/rhythm_background.tscn" id="6_kxg6i"]

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_0rtgb"]
panorama = ExtResource("2_ahkas")

[sub_resource type="Sky" id="Sky_uc8jg"]
sky_material = SubResource("PanoramaSkyMaterial_0rtgb")

[sub_resource type="Environment" id="Environment_6e5wd"]
background_mode = 2
sky = SubResource("Sky_uc8jg")
sky_rotation = Vector3(0, 1.39626, -0.567232)
tonemap_mode = 2
glow_enabled = true

[sub_resource type="ViewportTexture" id="ViewportTexture_7t6o2"]
viewport_path = NodePath("MeshInstance3D/RhythmBackground")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_k8hag"]
resource_local_to_scene = true
shading_mode = 0
albedo_texture = SubResource("ViewportTexture_7t6o2")
billboard_mode = 1
billboard_keep_scale = true

[sub_resource type="QuadMesh" id="QuadMesh_sy6oh"]
resource_local_to_scene = true
material = SubResource("StandardMaterial3D_k8hag")
size = Vector2(1.778, 1)

[node name="RhythmMinigame" type="SubViewport"]
transparent_bg = true
size = Vector2i(1920, 1080)
script = ExtResource("1_pb007")

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, -2.255, 11.69, 2.19)
fov = 20.0

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_6e5wd")

[node name="Board" parent="." instance=ExtResource("3_jy8mj")]

[node name="Mesh" parent="Board" index="1"]
transform = Transform3D(1.105, 0, 0, 0, 1, 0, 0, 0, 4, 0.06, -0.25, 0)

[node name="Key Left" parent="Board/Keys" index="0"]
transform = Transform3D(0.3, 0, 0, 0, 0.3, 0, 0, 0, 0.3, -0.75, 0.05, 3.95)

[node name="Key Down" parent="Board/Keys" index="1"]
transform = Transform3D(0.3, 0, 0, 0, 0.3, 0, 0, 0, 0.3, -0.25, 0.05, 3.95)

[node name="Key Up" parent="Board/Keys" index="2"]
transform = Transform3D(0.3, 0, 0, 0, 0.3, 0, 0, 0, 0.3, 0.25, 0.05, 3.95)

[node name="Key Right" parent="Board/Keys" index="3"]
transform = Transform3D(0.3, 0, 0, 0, 0.3, 0, 0, 0, 0.3, 0.75, 0.05, 3.95)

[node name="NoteSpawner" parent="." instance=ExtResource("4_sd6aa")]
stream = ExtResource("5_0ssek")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(23.0249, 0, 0, 0, 23.0249, 0, 0, 0, 23.0249, -2.38, -52.124, 2.32)
mesh = SubResource("QuadMesh_sy6oh")

[node name="RhythmBackground" parent="MeshInstance3D" instance=ExtResource("6_kxg6i")]
own_world_3d = true
transparent_bg = true
handle_input_locally = false
use_taa = true
use_occlusion_culling = true

[editable path="Board"]
